%!TEX root = ../building-verbs.tex
%!TEX encoding = UTF-8 Unicode
%%
%% Font support for special symbols (e.g. math).
%%

% https://tex.stackexchange.com/questions/367773/command-textsuperscript-unavailable-in-encoding-tu?noredirect=1
\DeclareTextSymbol{\texttilde} {TU} {"007E}

%% Short command for a superscript question mark.
\ProvideDocumentCommand \supq {} {\textsuperscript*{?}}

%% Load the newunicodechar package.
%%
%% This package lets you define arbitrary macros to run for particular
%% Unicode characters (or any character, really). This allows you to
%% switch fonts per character, and thus use different fonts for e.g.
%% mathematical symbols, Hebrew letters, etc. It should not be used
%% for long stretches of text, which instead should be done with a
%% specialized command or environment that changes the font in a
%% more general way.
%%
%% All that the \newunicodechar command is really doing under the
%% hood is something like plain TeX
%%   \catcode`\X=\active
%%   \defX{\textbf{\char"2323}}
%% but it's much easier to use and so less error-prone.
\usepackage{newunicodechar}

%% This font is specifically for the check symbol that indicates
%% grammaticality or felicity. The macro can be used in contexts
%% where the character can't, with the same printed result. E.g.
%% ExPex can use \ck to determine judgement width, but not âœ“.
%%
%% NOTE: You need two braces here because of macro processing.
%% You can also use \begingroup ... \endgroup. It's a TeX thing.
\ProvideDocumentCommand \ck {} {{\ckfont âœ“}}
%% Two braces again, here and elsewhere below.
\newunicodechar{âœ“}{{\ck}}

%% This font is for the X symbol that contrasts with the check above.
%% The same principles apply.
%\newfontfamily{\badxfont}[Scale=1]{Zapf Dingbats}
\newfontfamily{\badxfont}{Zapf Dingbats}
\ProvideDocumentCommand \badx {} {{\badxfont âœ“}}
\newunicodechar{âœ—}{{\badxfont âœ—}}

%% The slashed zero as the null symbol.
%% The macro is defined in crippenmacros.sty.
\newunicodechar{âˆ…}{{\nul}}

%% The Brill font has Greek-style default versions of {Î², Î¸, Î», Ï‡} and
%% Roman-style versions available with ss20. But I only want
%% the roman Î¸ and not the others. Brill 2.02 doesnâ€™t implement
%% character variant features (cvXX) for these, so the only way to access
%% them is through ss20. I use newunicodechar to automatically add
%% ss20 whenever Î¸ appears.
%%
%% This solution completely ignores the current font. That means that ss20 will
%% be applied in every situation, no matter what. So even if the font is no
%% longer Brill for some reason, Î¸ will still show up with ss20. It works fine if
%% youâ€™re consistent and careful, but it isnâ€™t ideal. cvXX would be ideal.
\newunicodechar{Î¸}{{\addfontfeature{StylisticSet=20}Î¸}}

%% Mathematical symbols.
%%
%% If you have things with diacritics (e.g. math negation) then if
%% these are decomposed (NFD) it will make TeX barf. YHBW.
%%
%% The double braces are on purpose, with the inner pair
%% restricting the scope of the font switching commands.
%%
%% FIXME: This should be in an array with a loop instantiating each
%% character, rather than repeating the same code over and over again.
%% It wouldn't make it any more efficient, but it'd be easier to modify.
%% Actually it would be a couple array+loops, one for each font.

%% Set stuff.
\newunicodechar{âˆˆ}{{\mathemafont âˆˆ}}	% element
\newunicodechar{âˆ‰}{{\mathemafont âˆ‰}}	% not element
\newunicodechar{âŠ‚}{{\mathemafont âŠ‚}}	% proper subset
\newunicodechar{âŠƒ}{{\mathemafont âŠƒ}}	% proper superset
\newunicodechar{âŠ†}{{\mathemafont âŠ†}}	% total subset
\newunicodechar{âŠ‡}{{\mathemafont âŠ‡}}	% total superset
\newunicodechar{âŠŠ}{{\mathemafont âŠŠ}}	% nontotal subset
\newunicodechar{âŠ‹}{{\mathemafont âŠ‹}}	% nontotal superset
\newunicodechar{âŠˆ}{{\mathemafont âŠˆ}}	% not total subset
\newunicodechar{âŠ‰}{{\mathemafont âŠ‰}}	% not total superset
\newunicodechar{âˆª}{{\mathemafont âˆª}}	% union
\newunicodechar{âˆ©}{{\mathemafont âˆ©}}	% intersection
\newunicodechar{â‹ƒ}{{\mathemafont â‹ƒ}}	% big union

%% Logic and quantification.
\newunicodechar{â‰¡}{{\mathemafont â‰¡}}	% triple equals
\newunicodechar{â‰¢}{{\mathemafont â‰¢}}	% triple not equals
\newunicodechar{â‰…}{{\mathemafont â‰…}}	% triple approximately equals
\newunicodechar{âˆ§}{{\mathemafont âˆ§}}	% logical and
\newunicodechar{âˆ¨}{{\mathemafont âˆ¨}}	% logical or
\newunicodechar{âˆ€}{{\mathemafont âˆ€}}	% for all
\newunicodechar{âˆƒ}{{\mathemafont âˆƒ}}	% exists
\newunicodechar{âˆ„}{{\mathemafont âˆ„}}	% not exists

%% Orderings.
\newunicodechar{âŠ¤}{{\mathemafont âŠ¤}}	% supremum, top
\newunicodechar{âŠ¥}{{\mathemafont âŠ¥}}	% infimum, bottom
\newunicodechar{âŠ‘}{{\mathemafont âŠ‘}}	% precedes
\newunicodechar{âŠ’}{{\mathemafont âŠ’}}	% succedes
\newunicodechar{âŠ}{{\mathemafont âŠ}}	% strictly precedes
\newunicodechar{âŠ}{{\mathemafont âŠ}}	% strictly succedes
\newunicodechar{âŠ‘Ì¸}{{\mathemafont âŠ‘Ì¸}}	% not succeeds
\newunicodechar{â‰ª}{{\mathemafont â‰ª}}	% much less than
\newunicodechar{â‰«}{{\mathemafont â‰«}}	% much greater than
\newunicodechar{â‰¶}{{\mathemafont â‰¶}}	% less than over greater than
\newunicodechar{â‰·}{{\mathemafont â‰·}}	% greater than over less than
\newunicodechar{â‰¸}{{\mathemafont â‰¹}}	% neither less than nor greater than
\newunicodechar{â‰¹}{{\mathemafont â‰¹}}	% neither greater than nor less than
\newunicodechar{â‰¼}{{\mathemafont â‰¼}}	% curved precedes
\newunicodechar{â‰½}{{\mathemafont â‰½}}	% curved succedes
\newunicodechar{â‰º}{{\mathemafont â‰º}}	% curved strictly precedes
\newunicodechar{â‰»}{{\mathemafont â‰»}}	% curved strictly succedes
\newunicodechar{âŠ€}{{\mathemafont âŠ€}}	% not curved strictly succeeds

%% Arrows.
\newunicodechar{â‡’}{{\mathemafont â‡’}} % double east arrow
\newunicodechar{â‡}{{\mathemafont â‡}} % double west arrow
\newunicodechar{â‡”}{{\mathemafont â‡”}} % double east-west arrow
\newunicodechar{â‡}{{\mathemafont â‡}} % not double east arrow
\newunicodechar{â‡}{{\mathemafont â‡}} % not double west arrow
\newunicodechar{â‡}{{\mathemafont â‡}} % not double east-west arrow
\newunicodechar{â†¦}{{\mathemafont â†¦}} % maps to
\newunicodechar{â†¤}{{\mathemafont â†¤}} % maps from
\newunicodechar{â¤µ}{{\mathemafont \raisebox{-0.5ex}{â¤µ}}} % right curve downwards arrow

%% Calligraphic script letters.
\newunicodechar{ğ’}{{\mathecalfont ğ’}}	% script capital C
\newunicodechar{â„°}{{\mathecalfont â„°}}	% script capital E
\newunicodechar{ğ’¬}{{\mathecalfont ğ’¬}}	% script capital Q
\newunicodechar{â„›}{{\mathecalfont â„›}}	% script capital R

%% Phonetic stuff.
\newunicodechar{áµ’}{{\phonfont áµ’}}	% superscript o
\newunicodechar{áµ}{{\phonfont áµ}}	% superscript k
\newunicodechar{áµ˜}{{\phonfont áµ˜}}	% superscript u
\newunicodechar{áµ‰}{{\phonfont áµ‰}}	% superscript e
\newunicodechar{áµ—}{{\phonfont áµ—}}	% superscript t
\newunicodechar{êœ}{{\phonfont êœ}}	% superscript !
\newunicodechar{êœœ}{{\phonfont êœœ}}	% superscript down arrow
\newunicodechar{êœ›}{{\phonfont êœ›}}	% superscript up arrow
\newunicodechar{â‚š}{{\phonfont â‚š}}	% subscript p
\newunicodechar{á´´}{{\phonfont á´´}}	% superscript capital H

%% Miscellanea.
%\newunicodechar{ğ‘£}{{\mathemafont ğ‘£}}
\newunicodechar{Â¬}{{\mathemafont Â¬}}	% not: Brill has this but itâ€™s too low
\newunicodechar{â‹®}{{\mathemafont â‹®}}	% vertical ellipsis
\newunicodechar{â„“}{{\mathemafont â„“}}	% script small l
\newunicodechar{âŠ—}{{\upshape\mathemafont âŠ—}}	% circle times
\newunicodechar{â¬š}{{\symfont â¬š}}	% dotted box